{% extends 'learner/base.html' %} {% load static %} {% block title %}{{
certification.title }} - Certification Details - SmartCampus{% endblock %} {%
block body_class %}certification-detail-page{% endblock %} {% block content %}
<!-- Page Header -->
<section class="page-header section light-background">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-8" data-aos="fade-up">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item">
              <a href="{% url 'index' %}">Home</a>
            </li>
            <li class="breadcrumb-item">
              <a href="{% url 'instructor_courses' %}">My Courses</a>
            </li>
            {% if course %}
            <li class="breadcrumb-item">
              <a href="{% url 'course_detail' course.id %}"
                >{{ course.title }}</a
              >
            </li>
            {% endif %}
            <li class="breadcrumb-item active" aria-current="page">
              {{ certification.title }}
            </li>
          </ol>
        </nav>
        <h1 class="page-title">
          <i class="bi bi-award"></i> {{ certification.title }}
        </h1>
        <p class="page-description">{{ certification.description }}</p>
      </div>
    </div>
  </div>
</section>

<!-- Certification Details -->
<section class="section">
  <div class="container">
    <div class="row">
      <!-- Main Content -->
      <div class="col-lg-8">
        <!-- Certification Info Card -->
        <div class="card shadow-sm mb-4">
          <div class="card-header bg-primary text-white">
            <h5 class="mb-0">
              <i class="bi bi-info-circle"></i> Certification Information
            </h5>
          </div>
          <div class="card-body">
            <div class="row mb-3">
              <div class="col-md-6">
                <p class="mb-2">
                  <strong><i class="bi bi-bullseye"></i> Passing Score:</strong>
                  <span class="badge bg-info ms-2"
                    >{{ certification.passing_score }}%</span
                  >
                </p>
              </div>
              <div class="col-md-6">
                <p class="mb-2">
                  <strong><i class="bi bi-list-check"></i> Total Steps:</strong>
                  <span class="badge bg-secondary ms-2"
                    >{{ certification.total_steps }}</span
                  >
                </p>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <p class="mb-2">
                  <strong><i class="bi bi-toggle-on"></i> Status:</strong>
                  {% if certification.is_active %}
                  <span class="badge bg-success ms-2">Active</span>
                  {% else %}
                  <span class="badge bg-secondary ms-2">Inactive</span>
                  {% endif %}
                </p>
              </div>
              {% if certification.badge_image %}
              <div class="col-md-6">
                <p class="mb-2">
                  <strong><i class="bi bi-image"></i> Badge:</strong>
                  <a
                    href="{{ certification.badge_image }}"
                    target="_blank"
                    class="ms-2"
                    >View Badge</a
                  >
                </p>
              </div>
              {% endif %}
            </div>
          </div>
        </div>

        <!-- Steps List -->
        <div class="card shadow-sm">
          <div
            class="card-header bg-success text-white d-flex justify-content-between align-items-center"
          >
            <h5 class="mb-0">
              <i class="bi bi-list-ol"></i> Certification Steps
            </h5>
            <a
              href="{% url 'manage_certification_steps' certification.id %}"
              class="btn btn-sm btn-light"
            >
              <i class="bi bi-plus-circle"></i> Add Step
            </a>
          </div>
          <div class="card-body">
            {% if steps %}
            <div class="list-group">
              {% for step in steps %}
              <div class="list-group-item">
                <div class="d-flex justify-content-between align-items-start">
                  <div class="flex-grow-1">
                    <h6 class="mb-1">
                      <span class="badge bg-primary me-2"
                        >Step {{ step.step_order }}</span
                      >
                      {{ step.title }}
                    </h6>
                    <p class="mb-1 text-muted small">{{ step.description }}</p>
                    <div class="mt-2">
                      <span class="badge bg-info">
                        {% if step.step_type == 'reading' %}
                        <i class="bi bi-book"></i> Reading {% elif
                        step.step_type == 'video' %}
                        <i class="bi bi-play-circle"></i> Video {% elif
                        step.step_type == 'quiz' %}
                        <i class="bi bi-question-circle"></i> Quiz {% elif
                        step.step_type == 'assignment' %}
                        <i class="bi bi-file-earmark-text"></i> Assignment {%
                        else %} <i class="bi bi-file"></i> {{ step.step_type }}
                        {% endif %}
                      </span>
                      {% if step.content_url %}
                      <a
                        href="{{ step.content_url }}"
                        target="_blank"
                        class="badge bg-secondary text-decoration-none"
                      >
                        <i class="bi bi-link-45deg"></i> View Content
                      </a>
                      {% endif %}
                    </div>
                  </div>
                </div>
              </div>
              {% endfor %}
            </div>
            {% else %}
            <div class="text-center py-5 text-muted">
              <i class="bi bi-inbox" style="font-size: 3rem"></i>
              <p class="mt-3">No steps added yet</p>
              <a
                href="{% url 'manage_certification_steps' certification.id %}"
                class="btn btn-primary"
              >
                <i class="bi bi-plus-circle"></i> Add First Step
              </a>
            </div>
            {% endif %}
          </div>
        </div>
      </div>

      <!-- Sidebar -->
      <div class="col-lg-4">
        <!-- Actions Card -->
        <div class="card shadow-sm mb-4">
          <div class="card-header bg-dark text-white">
            <h5 class="mb-0"><i class="bi bi-gear"></i> Actions</h5>
          </div>
          <div class="card-body">
            <div class="d-grid gap-2">
              <a
                href="{% url 'edit_certification' certification.id %}"
                class="btn btn-primary"
              >
                <i class="bi bi-pencil"></i> Edit Certification
              </a>
              <a
                href="{% url 'manage_certification_steps' certification.id %}"
                class="btn btn-success"
              >
                <i class="bi bi-list-check"></i> Manage Steps
              </a>
              {% if course %}
              <a
                href="{% url 'course_detail' course.id %}"
                class="btn btn-outline-secondary"
              >
                <i class="bi bi-arrow-left"></i> Back to Course
              </a>
              {% endif %}
              <button
                type="button"
                class="btn btn-danger"
                onclick="confirmDelete('{{ certification.id }}')"
              >
                <i class="bi bi-trash"></i> Delete Certification
              </button>
            </div>
          </div>
        </div>

        <!-- Statistics Card -->
        <div class="card shadow-sm">
          <div class="card-header bg-info text-white">
            <h5 class="mb-0"><i class="bi bi-bar-chart"></i> Statistics</h5>
          </div>
          <div class="card-body">
            <div class="mb-3">
              <div class="d-flex justify-content-between mb-1">
                <span>Total Steps:</span>
                <strong>{{ certification.total_steps }}</strong>
              </div>
              <div class="d-flex justify-content-between mb-1">
                <span>Passing Score:</span>
                <strong>{{ certification.passing_score }}%</strong>
              </div>
              <div class="d-flex justify-content-between">
                <span>Status:</span>
                <strong>
                  {% if certification.is_active %}
                  <span class="text-success">Active</span>
                  {% else %}
                  <span class="text-secondary">Inactive</span>
                  {% endif %}
                </strong>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  function confirmDelete(certificationId) {
    if (
      confirm(
        "Are you sure you want to delete this certification? This action cannot be undone and will also delete all associated steps."
      )
    ) {
      window.location.href = `/instructor/certification/${certificationId}/delete/`;
    }
  }
</script>
{% endblock %}
